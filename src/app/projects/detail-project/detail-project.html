<div class="p-6 h-full overflow-y-auto rounded-md">
  <div class="flex justify-between items-center mb-6 bg-gray-700 p-4 rounded-t-lg">
    <h2 class="text-xl font-bold text-white">Détails du projet</h2>
    <button
      title="Fermer le modal"
      (click)="closeModal()"
      class="text-white rounded p-2 hover:bg-opacity-20 hover:text-gray-600 hover:bg-gray-100 transition-colors"
    >
      <i class="fas fa-times text-lg"></i>
    </button>
  </div>
  <div class="space-y-6">
    <div class="bg-gray-50 p-4 rounded-lg flex flex-col sm:flex-row sm:items-center justify-between gap-4">
      <div class="flex items-center flex-wrap gap-2">
        <h3 class="font-medium text-gray-700">Parties prenantes:</h3>
        @if (projectResponsibles().length > 0) {
          <div class="flex -space-x-2 overflow-hidden items-center">
            @for (responsible of projectResponsibles(); track responsible.email) {
              <div class="relative group">
                <div
                  class="relative inline-flex items-center justify-center w-8 h-8 rounded-full ring-2 ring-white text-white font-semibold text-xs"
                  [style.background-color]="(responsible.email.length) % 2 === 0 ? '#4CAF50' : '#2196F3'"
                >
                  {{ getInitials(responsible) }}
                </div>
                <div class="absolute z-10 hidden group-hover:block bg-white shadow-lg rounded-md p-2 min-w-[200px]">
                  <div class="text-gray-800 font-medium">
                    {{ responsible.firstname }} {{ responsible.lastname }}
                  </div>
                  <div class="text-gray-500 text-sm">
                    {{ responsible.email }}
                  </div>
                </div>
              </div>
            }
          </div>
        } @else {
          <p class="text-gray-600 text-sm">Aucune partie prenante associée.</p>
        }
      </div>
      <button
        type="button"
        (click)="inviteStakeholders()"
        class="px-4 py-2 bg-black text-white rounded-md hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2 w-full sm:w-auto"
      >
        <i class="fas fa-user-plus"></i>
        <span>Invitation</span>
      </button>
    </div>
    <div class="bg-gray-50 p-4 rounded-lg">
      <h3 class="font-medium text-gray-700">Nom du projet: </h3>
      <p class="text-gray-700 mb-3">{{ project.name }}</p>
      <h3 class="font-medium text-gray-700 mb-1">Description</h3>
      <p class="text-gray-700">
        {{ project.description }}
      </p>
    </div>
    <div class="bg-gray-50 p-4 rounded-lg">
      <h3 class="font-medium text-gray-700">Période d'estimation du projet:</h3>
      <p class="text-gray-700 mb-3">{{ project.startDate | date:'fullDate':'':'fr'}} - {{ project.endDate | date:'fullDate':'':'fr'}}</p>
      <h3 class="font-medium text-gray-700">Statut: </h3>
      <p class="text-gray-700 mb-3">{{ project.status }}</p>
      <!-- <h3 class="font-medium text-gray-700 mb-1">Total budget:</h3>
      <p class="text-gray-700">
        {{ project.totalBudget | currency:'USD':'symbol':'1.2-2' }}
      </p> -->
    </div>
    <div class="bg-gray-50 p-4 rounded-lg">
      <h3 class="font-medium text-gray-700 mb-1">Total budget:</h3>
      <p class="text-gray-700">
        {{ project.totalBudget | currency:'USD':'symbol':'1.2-2' }}
      </p>
    </div>
  </div>
</div>

@if (showInviteModal()) {
  <div class="fixed inset-0 z-100 flex">
    <div
      class="fixed inset-0 backdrop-contrast-50"
      (click)="showInviteModal.set(false)"
    ></div>
    <div class="relative ml-auto w-[400px] h-full">
      <app-invite-modal
        [projectId]="project.id!"
        (closeModal)="showInviteModal.set(false)"
        (save)="handleSaveResponsibles($event)"
      ></app-invite-modal>
    </div>
  </div>
}
